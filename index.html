<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Roma Imperial 2026</title>
    <meta name="theme-color" content="#8B0000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhEmITawppNohDJ8yrB5o888YMWrpJEralMwMFGkTZk5sZhkGMQ1GvbuolJodMly8kmKLZT4C92Kv4YU_i1af3g37qbujkH2lQRWOp2M9YV8f72mjuEjje6ceLT63u6tqqNtQclutrF3ArKV3hEtRv7tdWzabxGzSWajw2p0_whKmJh9c869TEjq9MLc0k/s2048/Gemini_Generated_Image_1odwzv1odwzv1odw.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        imperial: { 50: '#fff1f1', 100: '#ffdfdf', 200: '#ffc5c5', 300: '#ff9d9d', 400: '#ff6464', 500: '#ff2d2d', 600: '#ed1515', 700: '#c80d0d', 800: '#a50f0f', 900: '#8b0000' },
                        gold: { 500: '#D4AF37' },
                        marble: { 500: '#F5F5F5' },
                    },
                    fontFamily: {
                        sans: ['Roboto Condensed', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        html, body { height: 100%; width: 100%; margin: 0; padding: 0; overscroll-behavior-y: none; }
        body { font-family: 'Roboto Condensed', sans-serif; -webkit-tap-highlight-color: transparent; height: 100dvh; }
        #root { height: 100%; width: 100%; display: flex; flex-direction: column; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .poi-marker { transition: transform 0.2s ease; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-hidden">
    <div id="root" class="h-full"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.263.1",
    "recharts": "https://esm.sh/recharts@2.12.0",
    "leaflet": "https://esm.sh/leaflet@1.9.4",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            CalendarClock, Map as MapIcon, Wallet, BookOpen, Anchor, 
            AlertTriangle, CheckCircle2, Circle, Clock, MapPin, 
            ArrowRight, Info, Volume2, Thermometer, ShoppingBag, 
            Camera, Sun, Moon, CloudRain, ExternalLink, Ticket,
            Instagram, Languages, Phone, Headphones, Play, Square, CreditCard, Utensils
        } from 'lucide-react';

        // --- CONSTANTS & DATA (ROMA IMPERIAL 2026) ---
        const SHIP_DEPARTURE_TIME = "18:00";
        const SHIP_ONBOARD_TIME = "17:30"; 
        const STORAGE_KEY = 'roma_guide_sync_v3'; 
        
        const COORDS = {
            SHUTTLE_CRUCERO: { lat: 42.097499, lng: 11.788778 },
            ESTACION_CIVITAVECCHIA: { lat: 42.087946, lng: 11.7983 },
            PARADA_BUS_PUERTO: { lat: 42.096385, lng: 11.789507 },
            COLISEO: { lat: 41.890246, lng: 12.492374 },
            ARCO_CONSTANTINO: { lat: 41.889756, lng: 12.490657 },
            LOBA_CAPITULINA: { lat: 41.893287, lng: 12.483649 },
            CAMPIDOGLIO: { lat: 41.893317, lng: 12.48293 },
            TREVI: { lat: 41.900936, lng: 12.483303 },
            PANTEON: { lat: 41.899009, lng: 12.476792 },
            NAVONA: { lat: 41.89916, lng: 12.473091 },
            SANT_ANGELO: { lat: 41.902643, lng: 12.466393 },
            SAN_PEDRO: { lat: 41.902258, lng: 12.458279 },
            STATION_SAN_PIETRO: { lat: 41.896275, lng: 12.454727 },
            ESCALINATA_VITTORIO: { lat: 41.89543, lng: 12.482704 },
            METRO_COLOSSEO: { lat: 41.891277, lng: 12.491309 }
        };

        const INITIAL_ITINERARY = [
            {
                id: '1', title: 'Puerto: Shuttle Crucero', startTime: '07:15', endTime: '07:45',
                locationName: 'Puerto Civitavecchia', coords: COORDS.SHUTTLE_CRUCERO,
                description: 'Desembarco y toma del Shuttle gratuito al pie del barco.',
                keyDetails: 'El shuttle te deja en Largo della Pace.',
                priceEUR: 0, type: 'logistics', completed: false
            },
            {
                id: '2', title: 'Estación de Tren', startTime: '08:09', endTime: '08:20',
                locationName: 'Estación Civitavecchia', coords: COORDS.ESTACION_CIVITAVECCHIA,
                description: 'Bus a la estación y compra del ticket BIRG.',
                keyDetails: 'BIRG 12€: cubre tren, metro y bus en Roma.',
                priceEUR: 12, type: 'transport', completed: false, notes: 'CRITICAL'
            },
            {
                id: '3', title: 'Centro de Roma: Coliseo', startTime: '10:15', endTime: '11:00',
                locationName: 'Colosseo', coords: COORDS.COLISEO,
                description: 'Llegada al área arqueológica central.',
                keyDetails: 'Usa el metro Colosseo para salir directamente frente a él.',
                priceEUR: 0, type: 'sightseeing', completed: false
            },
            {
                id: '4', title: 'Campidoglio', startTime: '11:00', endTime: '12:00',
                locationName: 'Plaza del Campidoglio', coords: COORDS.CAMPIDOGLIO,
                description: 'Visita a la Loba Capitolina y vistas del Foro.',
                keyDetails: 'Diseñado por Miguel Ángel.',
                priceEUR: 0, type: 'sightseeing', completed: false
            },
            {
                id: '5', title: 'Fontana di Trevi', startTime: '12:15', endTime: '12:45',
                locationName: 'Trevi', coords: COORDS.TREVI,
                description: 'Pide tu deseo lanzando la moneda.',
                keyDetails: 'Prohibido comer o beber en la fuente.',
                priceEUR: 0, type: 'sightseeing', completed: false
            },
            {
                id: '6', title: 'Almuerzo en Navona', startTime: '13:00', endTime: '14:00',
                locationName: 'Piazza Navona', coords: COORDS.NAVONA,
                description: 'Pizza al taglio y descanso.',
                keyDetails: 'Visita rápida al Panteón que está al lado.',
                priceEUR: 15, type: 'food', completed: false
            },
            {
                id: '7', title: 'Vaticano / San Pedro', startTime: '14:15', endTime: '14:45',
                locationName: 'Plaza San Pedro', coords: COORDS.SAN_PEDRO,
                description: 'Columnata de Bernini y vistas de la Basílica.',
                keyDetails: 'Cruce peatonal estratégico.',
                priceEUR: 0, type: 'sightseeing', completed: false
            },
            {
                id: '8', title: 'Tren de Regreso', startTime: '15:02', endTime: '16:02',
                locationName: 'Roma S. Pietro', coords: COORDS.STATION_SAN_PIETRO,
                description: 'Tren directo de retorno al puerto.',
                keyDetails: 'No te pases de esta hora para evitar retrasos.',
                priceEUR: 0, type: 'transport', completed: false, notes: 'CRITICAL'
            },
            {
                id: '9', title: 'Límite: Todos a Bordo', startTime: '17:30', endTime: '17:30',
                locationName: 'Civitavecchia', coords: COORDS.SHUTTLE_CRUCERO,
                description: 'Fin de la jornada, regreso al barco.',
                keyDetails: 'Hora máxima para embarcar.',
                priceEUR: 0, type: 'logistics', completed: false, notes: 'CRITICAL'
            }
        ];

        const WAYPOINTS_GPX = [
            { name: "COLISEO", lat: 41.890246, lng: 12.492374 },
            { name: "ARCO CONSTANTINO", lat: 41.889756, lng: 12.490657 },
            { name: "VISTA FORO", lat: 41.891274, lng: 12.490416 },
            { name: "LOBA CAPITULINA", lat: 41.893287, lng: 12.483649 },
            { name: "PLAZA CAMPIDOGLIO", lat: 41.893317, lng: 12.48293 },
            { name: "COLOSO CONSTANTINO", lat: 41.892406, lng: 12.481458 },
            { name: "ESCALINATA VITTORIO", lat: 41.89543, lng: 12.482704 },
            { name: "FONTANA DI TREVI", lat: 41.900936, lng: 12.483303 },
            { name: "PANTEON", lat: 41.899009, lng: 12.476792 },
            { name: "PLAZA NAVONA", lat: 41.89916, lng: 12.473091 },
            { name: "PUENTE SAN ANGELO", lat: 41.901901, lng: 12.466464 },
            { name: "CASTILLO SAN ANGELO", lat: 41.902643, lng: 12.466393 },
            { name: "PLAZA SAN PEDRO", lat: 41.902258, lng: 12.458279 },
            { name: "ESTACIÓN SAN PIETRO", lat: 41.896275, lng: 12.454727 },
            { name: "SHUTTLE CRUCERO", lat: 42.097499, lng: 11.788778 },
            { name: "ESTACIÓN CIVITAVECCHIA", lat: 42.087946, lng: 11.7983 },
            { name: "PARADA AUTOBUS", lat: 42.096385, lng: 11.789507 }
        ];

        const TRACK_GPX = [[41.891218,12.491383],[41.891155,12.491916],[41.8911,12.491915],[41.890944,12.491915],[41.890966,12.492103],[41.890971,12.492242],[41.890964,12.492358],[41.890942,12.49252],[41.890906,12.492744],[41.890846,12.492954],[41.890749,12.493175],[41.890571,12.493529],[41.890501,12.493629],[41.890429,12.493694],[41.890307,12.493741],[41.89016,12.493717],[41.889967,12.493622],[41.889848,12.493564],[41.889879,12.493453],[41.889834,12.49337],[41.889742,12.493263],[41.889634,12.493107],[41.889568,12.492974],[41.889523,12.492806],[41.889471,12.49242],[41.889487,12.492192],[41.889472,12.491963],[41.88952,12.491793],[41.889599,12.491572],[41.889613,12.491548],[41.889739,12.491349],[41.889867,12.491208],[41.890029,12.491132],[41.890183,12.491101],[41.890307,12.491094],[41.890431,12.491109],[41.89051,12.491131],[41.890649,12.491204],[41.890763,12.491309],[41.890837,12.491412],[41.890885,12.491499],[41.890913,12.491437],[41.891,12.491177],[41.8911,12.490779],[41.891203,12.490416],[41.891262,12.490453],[41.891319,12.490307],[41.891614,12.489782],[41.89175,12.489541],[41.892,12.489079],[41.892476,12.488249],[41.892713,12.487955],[41.892929,12.487574],[41.893042,12.487289],[41.893161,12.487074],[41.893291,12.486887],[41.89347,12.486677],[41.893734,12.486316],[41.893883,12.486048],[41.894083,12.485696],[41.894604,12.484746],[41.894279,12.484288],[41.894083,12.484188],[41.89401,12.483921],[41.893775,12.483897],[41.893482,12.483648],[41.893393,12.483578],[41.893306,12.483236],[41.893221,12.483007],[41.893206,12.482927],[41.893225,12.482857],[41.89327,12.482804],[41.89331,12.482641],[41.893091,12.48224],[41.892648,12.481544],[41.892489,12.481431],[41.893,12.482104],[41.893472,12.482612],[41.893776,12.48196],[41.893862,12.481982],[41.894316,12.482148],[41.8946,12.482303],[41.894913,12.482179],[41.895154,12.482218],[41.8953,12.482443],[41.895441,12.482741],[41.89551,12.48301],[41.895727,12.483108],[41.895965,12.482962],[41.896099,12.482902],[41.896665,12.48266],[41.89677,12.48335],[41.897111,12.48334],[41.897656,12.483081],[41.898438,12.482743],[41.898934,12.483082],[41.899617,12.482842],[41.900438,12.482469],[41.900567,12.482722],[41.900724,12.483129],[41.900433,12.482309],[41.900132,12.480897],[41.899996,12.48021],[41.899968,12.47919],[41.899734,12.478716],[41.899538,12.478399],[41.899356,12.477287],[41.899141,12.47678],[41.899439,12.476602],[41.89952,12.476439],[41.899403,12.47512],[41.899394,12.474063],[41.899384,12.473779],[41.899112,12.47325],[41.899206,12.472847],[41.899803,12.472246],[41.899983,12.472183],[41.900453,12.472128],[41.900478,12.471615],[41.900477,12.470922],[41.900481,12.470625],[41.900486,12.469834],[41.900508,12.469427],[41.900538,12.468503],[41.900554,12.467504],[41.900738,12.467178],[41.90113,12.466787],[41.901212,12.466521],[41.901327,12.466513],[41.902457,12.466414],[41.90251,12.466367],[41.902407,12.465068],[41.902396,12.464293],[41.902381,12.463632],[41.902365,12.462948],[41.902337,12.462014],[41.902303,12.460697],[41.902279,12.459619],[41.902268,12.459173],[41.902258,12.45838],[41.902055,12.458268],[41.901819,12.458201],[41.90165,12.458113],[41.901436,12.457898],[41.90127,12.457469],[41.901327,12.456888],[41.901302,12.45669],[41.901214,12.456543],[41.901115,12.456495],[41.900826,12.456522],[41.900689,12.456513],[41.900473,12.456508],[41.900387,12.456504],[41.900107,12.45645],[41.900027,12.456424],[41.899838,12.456344],[41.899634,12.456256],[41.899572,12.456225],[41.899377,12.456013],[41.899371,12.455884],[41.899315,12.455882],[41.899187,12.455874],[41.898909,12.455486],[41.898579,12.455191],[41.898501,12.45509],[41.898478,12.454813],[41.897841,12.454815],[41.897455,12.453956],[41.896645,12.454792],[41.896554,12.454656],[41.896473,12.454641],[41.896394,12.454618],[41.89629,12.454744]];

        // --- COMPONENTS ---

        const Timeline = ({ itinerary, onToggleComplete, onLocate }) => {
            return (
                <div className="pb-32 px-4 pt-4 max-w-lg mx-auto h-full overflow-y-auto no-scrollbar">
                    <h2 className="text-2xl font-black text-imperial-900 mb-6 flex items-center tracking-tight">
                       <CalendarClock className="mr-2" /> Roma Imperial 2026
                    </h2>
                    <div className="relative border-l-2 border-imperial-200 ml-3">
                        {itinerary.map((act) => (
                            <div key={act.id} className="mb-8 ml-6 relative">
                                <div 
                                    className={`absolute -left-[31px] top-0 rounded-full bg-white border-2 cursor-pointer z-10 transition-all ${act.completed ? 'border-green-500 text-green-500 scale-90' : 'border-imperial-600 text-imperial-600 shadow-sm'}`}
                                    onClick={() => onToggleComplete(act.id)}
                                >
                                    {act.completed ? <CheckCircle2 size={24} /> : <Circle size={24} />}
                                </div>
                                <div 
                                    className={`p-4 rounded-xl border shadow-sm bg-white border-imperial-50 transition-opacity ${act.completed ? 'opacity-50' : ''}`}
                                    onClick={() => onLocate(act.coords)}
                                >
                                    <div className="flex items-center space-x-2 mb-1">
                                        <span className="bg-imperial-900 text-white px-2 py-0.5 rounded-full text-[10px] font-black">{act.startTime}</span>
                                        {act.notes?.includes('CRITICAL') ? <AlertTriangle size={14} className="text-red-500 animate-pulse" /> : null}
                                    </div>
                                    <h3 className="font-bold text-lg text-slate-800 leading-tight">{act.title}</h3>
                                    <p className="text-xs text-slate-500 mb-2 uppercase font-bold tracking-tighter flex items-center">
                                       <MapPin size={10} className="mr-1" /> {act.locationName}
                                    </p>
                                    <div className="bg-slate-50 p-2 rounded text-xs italic text-slate-700 border-l-2 border-gold-500">"{act.keyDetails}"</div>
                                    {act.notes && <p className="mt-2 text-[10px] text-red-600 font-bold uppercase">{act.notes}</p>}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const MapComponent = ({ focusedLocation }) => {
            const mapRef = useRef(null);
            const mapInstance = useRef(null);
            const layersRef = useRef([]);

            useEffect(() => {
                if(!mapRef.current) return;
                if(!mapInstance.current) {
                    mapInstance.current = L.map(mapRef.current, { zoomControl: false }).setView([41.895, 12.48], 14);
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                        attribution: '&copy; OpenStreetMap'
                    }).addTo(mapInstance.current);
                }
                const map = mapInstance.current;
                
                // Clear existing markers if any
                layersRef.current.forEach(l => map.removeLayer(l));
                layersRef.current = [];

                const pinIcon = L.divIcon({
                    className: 'poi-marker',
                    html: '<div style="background-color:#8b0000;width:10px;height:10px;border-radius:50%;border:2px solid white;box-shadow:0 0 5px rgba(0,0,0,0.3);"></div>',
                    iconSize: [10, 10]
                });

                const civPinIcon = L.divIcon({
                    className: 'poi-marker',
                    html: '<div style="background-color:#D4AF37;width:12px;height:12px;border-radius:50%;border:2px solid white;box-shadow:0 0 8px rgba(0,0,0,0.4);"></div>',
                    iconSize: [12, 12]
                });

                // Plot Waypoints
                WAYPOINTS_GPX.forEach(poi => {
                    const icon = (poi.lat > 42) ? civPinIcon : pinIcon;
                    const marker = L.marker([poi.lat, poi.lng], { icon: icon }).addTo(map).bindPopup(`<span class="font-bold text-xs">${poi.name}</span>`);
                    layersRef.current.push(marker);
                });

                // Plot Track
                const polyline = L.polyline(TRACK_GPX, {
                    color: '#D4AF37',
                    weight: 4,
                    opacity: 0.8,
                    dashArray: '10, 10',
                    lineCap: 'round'
                }).addTo(map);
                layersRef.current.push(polyline);

                if(focusedLocation) {
                    map.flyTo([focusedLocation.lat, focusedLocation.lng], 16);
                }
            }, [focusedLocation]);

            return <div ref={mapRef} className="w-full h-full z-0" />;
        };

        const Budget = () => (
            <div className="pb-32 px-4 pt-6 max-w-lg mx-auto h-full overflow-y-auto">
                <h2 className="text-2xl font-bold text-imperial-900 mb-6 flex items-center"><Wallet className="mr-2"/> Gastos</h2>
                <div className="bg-imperial-900 text-white p-6 rounded-2xl shadow-xl mb-6">
                    <p className="text-imperial-200 text-xs uppercase mb-1">Estimado Diario (BIRG + Comida)</p>
                    <div className="text-5xl font-black">39.00 €</div>
                </div>
                <div className="space-y-3">
                    {[
                        { name: 'Ticket BIRG (5 Zonas)', price: '12.00 €' },
                        { name: 'Almuerzo (Pizza + Bebida)', price: '15.00 €' },
                        { name: 'Extras (Café, Helado)', price: '12.00 €' }
                    ].map(item => (
                        <div key={item.name} className="flex justify-between p-4 bg-white rounded-xl border border-slate-200 shadow-sm">
                            <span className="font-bold text-slate-700">{item.name}</span>
                            <span className="font-black text-imperial-700">{item.price}</span>
                        </div>
                    ))}
                </div>
            </div>
        );

        const Guide = () => (
            <div className="pb-32 px-4 pt-6 max-w-lg mx-auto h-full overflow-y-auto">
                <h2 className="text-2xl font-bold text-imperial-900 mb-6 flex items-center"><BookOpen className="mr-2"/> Guía</h2>
                <div className="space-y-4">
                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                        <h3 className="font-black text-imperial-800 flex items-center mb-2"><Utensils size={18} className="mr-2"/> Comer "Al Banco"</h3>
                        <p className="text-sm text-slate-600 italic leading-relaxed">El café y el pan son mucho más baratos si los consumes de pie en la barra. Evita las mesas en zonas turísticas centrales.</p>
                    </div>
                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                        <h3 className="font-black text-imperial-800 flex items-center mb-2"><Ticket size={18} className="mr-2"/> BIRG Obligatorio</h3>
                        <p className="text-sm text-slate-600 italic leading-relaxed">Valídalo en las máquinas amarillas/verdes antes de subir al tren en Civitavecchia. Multas de hasta 50€ si no está sellado.</p>
                    </div>
                </div>
            </div>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState('timeline');
            const [itinerary, setItinerary] = useState(INITIAL_ITINERARY);
            const [mapFocus, setMapFocus] = useState(null);
            const [countdown, setCountdown] = useState('');

            useEffect(() => {
                const interval = setInterval(() => {
                    const now = new Date();
                    const target = new Date();
                    const [h, m] = SHIP_ONBOARD_TIME.split(':').map(Number);
                    target.setHours(h, m, 0);
                    const diff = target - now;
                    if(diff < 0) setCountdown("¡A BORDO!");
                    else {
                        const hh = Math.floor(diff / 3600000);
                        const mm = Math.floor((diff % 3600000) / 60000);
                        const ss = Math.floor((diff % 60000) / 1000);
                        setCountdown(`${hh}h ${mm}m ${ss}s`);
                    }
                }, 1000);
                return () => clearInterval(interval);
            }, []);

            const toggleComplete = (id) => {
                const next = itinerary.map(a => a.id === id ? { ...a, completed: !a.completed } : a);
                setItinerary(next);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(next));
            };

            const handleLocate = (coords) => {
                setMapFocus(coords);
                setActiveTab('map');
            };

            return (
                <div className="flex flex-col h-full bg-slate-50 font-sans">
                    <header className="bg-imperial-900 text-white p-4 shadow-lg z-20 flex justify-between items-center shrink-0">
                        <div className="flex items-center">
                            <Anchor className="mr-2 text-gold-500" size={20} />
                            <div>
                                <h1 className="font-bold text-xs text-gold-500 uppercase tracking-widest leading-none">Roma 2026: 16 Abr</h1>
                                <p className="text-[10px] text-imperial-200 mt-1 uppercase font-bold">Onboard: {SHIP_ONBOARD_TIME}</p>
                            </div>
                        </div>
                        <div className="text-right">
                            <div className="text-xl font-mono font-bold text-white tabular-nums">{countdown}</div>
                        </div>
                    </header>

                    <main className="flex-1 overflow-hidden relative">
                        {activeTab === 'timeline' && <Timeline itinerary={itinerary} onToggleComplete={toggleComplete} onLocate={handleLocate} />}
                        {activeTab === 'map' && <MapComponent focusedLocation={mapFocus} />}
                        {activeTab === 'budget' && <Budget />}
                        {activeTab === 'guide' && <Guide />}
                    </main>

                    <nav className="bg-white border-t border-slate-200 shadow-[0_-5px_15px_rgba(0,0,0,0.05)] z-30 pb-safe shrink-0">
                        <div className="flex justify-around items-center h-16">
                            {[
                                { id: 'timeline', icon: CalendarClock, label: 'Itinerario' },
                                { id: 'map', icon: MapIcon, label: 'Mapa' },
                                { id: 'budget', icon: Wallet, label: 'Gastos' },
                                { id: 'guide', icon: BookOpen, label: 'Guía' }
                            ].map(tab => (
                                <button 
                                    key={tab.id}
                                    onClick={() => { setActiveTab(tab.id); if(tab.id !== 'map') setMapFocus(null); }}
                                    className={`flex flex-col items-center w-full h-full justify-center transition-colors ${activeTab === tab.id ? 'text-imperial-600' : 'text-slate-400'}`}
                                >
                                    <tab.icon size={22} strokeWidth={activeTab === tab.id ? 2.5 : 2} />
                                    <span className="text-[10px] mt-1 font-bold uppercase tracking-tighter">{tab.label}</span>
                                </button>
                            ))}
                        </div>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>